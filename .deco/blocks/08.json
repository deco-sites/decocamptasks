{"__resolveType":"site/loaders/ContentLoad.ts","content":{"links":[{"bulletPoints":[],"url":"https://drive.google.com/file/d/1cJO9ru5vQviAPrmKyVFq8zK0u0saXz1_/view?usp=drive_link","description":"Vídeo - 08 - Mastering Loaders: Connecting your Site to the Web"},{"bulletPoints":[],"url":"https://drive.google.com/file/d/18Jcng2XlCik8vdMgJDssMRNTPvnVNgDJ/view?usp=drive_link","description":"Live Coding"}],"topics":["Loaders","Fetch","Load Data"],"title":"08 - Mastering Loaders: Connecting your Site to the Web","publishDate":"2024-05-22","content":"<p>Para o decocamp, implementamos uma API própria com as rotas descritas abaixo.</p><p></p><h2>API Eventos decocamp</h2><p></p><h3>Registro de evento</h3><ul><li><p>POST <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://camp-api.deco.cx/event\">https://camp-api.deco.cx/event</a></p></li></ul><p></p><p>Registro de um evento em um produto.</p><pre><code>body: { \"productId\": \"productId\" }\nheader: x-api-key: siteId</code></pre><p></p><p>Chamada curl associada:</p><pre><code>curl --location 'https://camp-api.deco.cx/event' \\\n--header 'x-api-key: teste123' \\\n--header 'Content-Type: application/json' \\\n--data '{ \"productId\": \"productId\" }'</code></pre><p></p><p>Retorno:</p><pre><code>{\n    \"total\": 1, \"product\": 1\n}</code></pre><p></p><h3>Recupera o número de eventos de um produto</h3><ul><li><p>GET <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://camp-api.deco.cx/event/:productId\">https://camp-api.deco.cx/event/:productId</a></p></li></ul><p></p><p>Recuperar votos de um produto. Chamada curl associada:</p><pre><code>curl --location 'https://camp-api.deco.cx/event/:productId' \\\n--header 'x-api-key: teste123'</code></pre><p></p><p>Retorno:</p><pre><code>{\n    \"product\": 1\n}</code></pre><p></p><h3>Total de eventos no sistema</h3><ul><li><p>GET <a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://camp-api.deco.cx/events\">https://camp-api.deco.cx/events</a></p></li></ul><p></p><p>Recuperar o total de votos dados em um site. Chamada curl associada:</p><pre><code>curl --location 'https://camp-api.deco.cx/events' \\\n--header 'x-api-key: teste123'</code></pre><p></p><p>Retorno:</p><pre><code>{\n    \"total\": 1\n}</code></pre><p></p><h2>Incrementando ProductAd</h2><p>Agora, o ProductAd deve também receber a propriedade de Id do produto (ou o product, no tipo ProductDetailsPage, caso esteja usando a API de ecommerce).</p><p></p><p>Além disso, adicione a propriedade:</p><ul><li><p>highlight?: boolean</p></li></ul><p></p><p>Quando o produto tiver mais do que 3 votos, e o productAd for verdadeiro, coloque uma marcação de destaque no produto. Para tanto, use um inline loader (um loader na section) para consultar se o produto deve receber destaque, ou não.</p><p></p><p><img src=\"https://ozksgdmyrqcxcwhnbepg.supabase.co/storage/v1/object/public/assets/9261/92cb1e43-2f5e-4480-84ef-515a07242329\"></p><p>Estatísticas de produtos</p><p></p><p></p><p></p><p>Crie loaders para os <strong>GETs dessa API</strong>, e ligue ao seu sistema, no caso as sections com indicações dos votos. Use o seu siteId como x-api-token. Os votos são reiniciados de tempos em tempos.</p>"}}